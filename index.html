<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>天氣測試</title>
  <style>
    body { background: #0a2342; color: #fff; font-family: sans-serif; }
    table { background: #fff; color: #222; border-radius: 8px; margin: 2em auto; padding: 1em; }
    th, td { padding: 0.5em 1em; text-align: center; }
    th { background: #1a3a6b; color: #fff; }
    tr:nth-child(even) { background: #f0f4fa; }
  </style>
</head>
<body>
  <h1 style="text-align:center;">宜蘭地區即時天氣</h1>
  <div id="weather" style="text-align:center;">載入天氣中...</div>
  <script>
    const apiKey = "2489d0d557110d29df9e13b2eb20c744"; // <--- 這裡換成你自己的 key
    const cities = [
      { name: "宜蘭市", query: "Yilan,TW" },
      { name: "羅東鎮", query: "Luodong,TW" },
      { name: "五結鄉", query: "Wujie,TW" }
    ];

    async function fetchWeather(city) {
      const url = `https://api.openweathermap.org/data/2.5/weather?q=${city.query}&appid=${apiKey}&units=metric&lang=zh_tw`;
      const res = await fetch(url);
      return res.json();
    }

    async function showWeather() {
      try {
        const weatherData = await Promise.all(cities.map(fetchWeather));
        let html = "<table><tr><th>地點</th><th>天氣</th><th>溫度</th><th>體感</th><th>降雨量</th></tr>";
        weatherData.forEach((data, i) => {
          html += `<tr>
            <td>${cities[i].name}</td>
            <td>${data.weather[0].description}</td>
            <td>${data.main.temp}°C</td>
            <td>${data.main.feels_like}°C</td>
            <td>${data.rain ? (data.rain["1h"] || data.rain["3h"] || 0) + "mm" : "0mm"}</td>
          </tr>`;
        });
        html += "</table>";
        document.getElementById("weather").innerHTML = html;
      } catch (e) {
        document.getElementById("weather").innerHTML = "天氣資料載入失敗，請檢查 API Key 或網路連線。";
      }
    }

    showWeather();
  </script>
</body>
</html>
